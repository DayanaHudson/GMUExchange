<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="stylesheet.css" rel="stylesheet">
    <link href="search.css" rel="stylesheet">
    <link href="compatibility.css" rel="stylesheet">
    <script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script type = "text/javascript" src = "myjavascript.js"></script>
    <script src="https://fb.me/react-15.0.0.js"></script>
    <script src="https://fb.me/react-dom-15.0.0.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.34/browser.min.js"></script>
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/3.4.0/firebase.js"></script>
    <!-- ReactFire -->
    <script src="https://cdn.firebase.com/libs/reactfire/1.0.0/reactfire.min.js"></script>
</head>
<body>
<script type = "text/babel">

    "use strict";
    var config = {
        apiKey: "AIzaSyD0i-jjYdLEq4iVrsnJ759fDWDO2t7Utao",
        authDomain: "gmuexchange.firebaseapp.com",
        databaseURL: "https://gmuexchange.firebaseio.com",
        storageBucket: "gmuexchange.appspot.com",
        messagingSenderId: "191322581126"
    };
    firebase.initializeApp(config);

    var ProductRegistration = React.createClass({
        //http://stackoverflow.com/questions/29108779/how-to-get-selected-value-of-a-dropdown-menu-in-reactjs
        handleChange: function() {
            this.props.onUserInput(
                    'all',//this.refs.categorySelection.value,
                    this.refs.descriptionTextInput.value,
                    this.refs.classTextInput.value,
                    this.refs.professorTextInput.value,
                    this.refs.priceTextInput.value,
                    this.refs.isbnTextInput.value,
                    this.refs.imageUploadInput.value
            );
        },
        render: function() {
            console.log('cat: ' + this.props.categorySelection + 'desc: '+ this.props.descriptionText +
                    ' class: ' + this.props.classText + ' professor:' + this.props.professorText +
                    ' price: ' +this.props.priceText + 'isbn: ' + this.props.isbnText +
                    ' image: ' + this.props.imageUpload);
            return(
                    <div>
                        <form className = "creds">
                            <table className = "signUpFormTable"><tbody>
                                <tr>
                                    <td>Category: </td>
                                    <td><select name="searchTermSelection">
                                        <option name = "category" value="textbook">--select one--</option>
                                        <option name = "category" value="textbook">Textbook</option>
                                        <option name = "category" value="classNotes">Class Notes</option>
                                        <option name = "category" value="classMaterials">Class Materials</option>
                                        <option name = "category" value="misc">Miscellaneous</option>
                                    </select>
                                    </td>
                                    <td>ISBN: </td>
                                    <td><input
                                            className = "input"
                                            type="text"
                                            placeholder = "ISBN"
                                            value={this.props.isbnText}
                                            ref="isbnTextInput"
                                            onChange={this.handleChange}
                                            id = "productSubmissionISBN"
                                    /></td>
                                </tr>
                                <tr>
                                    <td>Item Description: </td>
                                    <td><input
                                            className = "input"
                                            type = "text"
                                            placeholder = "Description"
                                            value={this.props.descriptionText}
                                            ref="descriptionTextInput"
                                            onChange={this.handleChange}
                                            id = "productSubmissionDescription"
                                    /></td>
                                    <td>Class: </td>
                                    <td><input
                                            className = "input"
                                            type="text"
                                            placeholder = "Class"
                                            value={this.props.classText}
                                            ref="classTextInput"
                                            onChange={this.handleChange}
                                            id = "productSubmissionClass"
                                    /></td>
                                </tr>
                                <tr>
                                    <td>Price: </td>
                                    <td><input
                                            className = "input"
                                            type="text"
                                            placeholder = "Price"
                                            value={this.props.priceText}
                                            ref="priceTextInput"
                                            onChange={this.handleChange}
                                            id = "productSubmissionPrice"
                                    /></td>
                                    <td>Professor: </td>
                                    <td><input
                                            className = "input"
                                            type="text"
                                            placeholder = "Professor"
                                            value={this.props.professorText}
                                            ref="professorTextInput"
                                            onChange={this.handleChange}
                                            id = "productSubmissionProfessor"
                                    /></td>
                                </tr>
                                <tr>
                                    <td>Image: </td>
                                    <td><input
                                            className = "input"
                                            type="file"
                                            value={this.props.imageUpload}
                                            ref="imageUploadInput"
                                            onChange={this.handleChange}
                                            id = "productSubmissionFile"
                                    /></td>
                                </tr>
                                <tr>
                                    <td>
                                        <button
                                                className = "button"
                                                id = "signUpButton"
                                        >Submit</button>
                                    </td>
                                </tr>
                                </tbody></table>
                        </form>
                    </div>
            );
        }
    });

    var UserWelcome = React.createClass({
        render: function() {
            return(
                    <div className = "signUpFormDiv">
                        <h3>To post a product, please fill out the following form:</h3>
                    </div>
            );
        }
    });

    var PostAProductPage = React.createClass({
        getInitialState: function() {
            return {
                categorySelection: '--select one--',
                descriptionText: '',
                classText: '',
                professorText: '',
                priceText: '',
                isbnText: '',
                imageUpload: ''
            }
        },
        handleUserInput: function(categorySelection,descriptionText,classText,professorText,priceText,isbnText,imageUpload) {
            this.setState({
                categorySelection: categorySelection,
                descriptionText: descriptionText,
                classText: classText,
                professorText: professorText,
                priceText: priceText,
                isbnText: isbnText,
                imageUpload: imageUpload
            });
        },
        render: function() {
            return (
                    <div className = "body pageContent">
                        <UserWelcome
                                user={this.props.user}
                        />
                        <ProductRegistration
                                categorySelection={this.state.categorySelection}
                                descriptionText={this.state.descriptionText}
                                classText={this.state.classText}
                                professorText={this.state.professorText}
                                priceText={this.state.priceText}
                                isbnText={this.state.isbnText}
                                onUserInput={this.handleUserInput}
                        />
                    </div>
            );
        }
    });

    var ITEMS = [{id: "1", image: "IMAGE1.jpg", isbn: "978-1305257795", description: "Research Methods and Statistics - 5th edition", price: "$144.48", category: "Textbook", className: "GEN 301", Professor: "Johnson", Date: "01/02/2016"},
        {id: "2", image: "IMAGE2.jpg", isbn: "978-1118345009", description: "Principles of Anatomy and Physiology -Text Only - 14th edition", price: "$150.96", category: "Textbook", className: "PHYS 240", Professor: "Smith", Date: "05/02/2016"},
        {id: "3", image: "IMAGE3.jpg", isbn: "978-1305632134", description: "Power System Analysis and Design - 6th edition", price: "$148.49", category: "Textbook", className: "GEN 301", Professor: "Marks", Date: "07/02/2016"},
        {id: "4", image: "IMAGE4.jpg", isbn: "978-0134201665", description: "Anatomy and Physiology - With Mastering A and P - 6th edition", price: "$249.90", category: "Textbook", className: "PHYS 100", Professor: "Walker", Date: "08/02/2016"},
        {id: "5", image: "IMAGE5.jpg", isbn: null, description: "Class notes for GEN 202", price: "$10.00", category: "ClassNotes", className: "GEN 301", Professor: "Johnson", Date: "01/02/2016"},
        {id: "6", image: "IMAGE6.jpg", isbn: null, description: "Class materials for ECE 301", price: "$25.00", category: "ClassMaterials", className: "ECE 301", Professor: "Johnson", Date: "01/02/2016"},
        {id: "7", image: "IMAGE7.jpg", isbn: null, description: "Desk and chair", price: "$40.00", category: "Misc", className: null, Professor: null, Date: "05/02/2016"},];


    ReactDOM.render(
            <PostAProductPage items={ITEMS} />,
            document.getElementById('container')
    );
</script>
<nav class = "menu">
    <ul>
        <li class = "left" id = "homeLink">Home</li>
        <li class = "left" id = "searchLink">Search</li>
        <li class = "left" id = "postLink">Post Item</li>
        <li class = "rightMenuLinks" id = "logInLink">Log In</li>
        <li class = "rightMenuLinks" id = "signUpLink">Sign Up</li>
        <li id = "logOut">Log Out</li>
        <!--last li element to be defined as username after successful login-->
        <li><span id = "userName"></span></li>
    </ul>
</nav>
<div class = "mainHeading">
    <h1 class = "title">GMUExchange</h1>
    <!--to be defined by home view's JS-->
    <h2 class = "subtitle"></h2>
    <!--Quick log in access-->
    <table class = "quickLogin">
        <tr>
            <th><input class = "input" type = "email" placeholder = "GMU e-mail" id = "quickLoginEmail"/></th>
            <th><input class = "input" type = "password" placeholder = "Password" id = "quickLoginPassword"/></th>
        </tr>
        <tr>
            <td colspan = "2"><button class = "button" id = "quickLoginButton">Log In</button></td>
        </tr>
    </table>
    <!--Image labeled for reuse-->
    <img src="https://upload.wikimedia.org/wikipedia/commons/e/ea/An_aerial_view_of_the_Johnson_Center_at_dawn..jpg">
</div>
<div class = "sectionHeading">
    <h1 class = "title">GMUExchange</h1>
    <!--Subtitle to be defined by each view's JS-->
    <h2 class = "subtitle"  id = "subtitle">Search</h2>
    <!--Image labeled for reuse-->
    <img src="https://upload.wikimedia.org/wikipedia/commons/e/ea/An_aerial_view_of_the_Johnson_Center_at_dawn..jpg">
</div>
<div id="container">
    <!-- This element's contents will be replaced with your component. -->
</div>
</body>
<footer class = "footer">
    <h3>SWE 432</h3>
    <p>Dayana Hudson</p>
    <p>Ermal Dedej</p>
    <p><a href="https://github.com/dayanahudson/GMUExchange/">GitHub</a></p>
</footer>
</html>